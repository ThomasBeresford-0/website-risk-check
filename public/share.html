<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Shared report â€” Website Risk Check</title>

  <meta
    name="description"
    content="View and download a shared Website Risk Check report. Timestamped, client-ready documentation with public verification."
  />

  <meta name="theme-color" content="#0b1220" />
  <link rel="stylesheet" href="style.css?v=12" />
</head>

<body>
  <div class="bg" aria-hidden="true"></div>

  <nav class="nav">
    <div class="container navInner">
      <a class="brand" href="/" aria-label="Website Risk Check">
        <span class="brandMark" aria-hidden="true"></span>
        <span class="brandText">Website Risk Check</span>
      </a>

      <div class="navCtas">
        <a class="navBtn" href="/#scan">Run a scan</a>
      </div>
    </div>
  </nav>

  <main class="page">
    <section class="container">
      <div class="shareShell">

        <header class="shareHead">
          <div>
            <div class="shareKicker">Shared report</div>
            <h1 class="shareTitle">Point-in-time website compliance & risk snapshot.</h1>
            <p class="shareSub">
              This link provides access to a sealed report generated at a specific time.
              No login required.
            </p>
          </div>

          <div class="seal">
            <span class="sealDot" aria-hidden="true"></span>
            <span class="sealText">Snapshot sealed</span>
          </div>
        </header>

        <div class="issueCard">
          <div class="issueTop">
            <div>
              <div class="issueTitle">Download the report</div>
              <div class="issueHint">Client-ready PDF deliverable</div>
            </div>
          </div>

          <div class="shareActions">
            <button id="download" class="btnPrimary btnWide" type="button">
              Download PDF report
            </button>
            <div class="issueFine">
              If you received this link from an agency or consultant, you can download immediately.
            </div>
          </div>

          <div class="dividerLine" style="margin:16px 0;"></div>

          <div class="shareIncluded">
            <div class="shareMini">
              <div class="shareMiniTop">Included</div>
              <div class="shareMiniBody">
                Timestamp, coverage notes, detected signals, explanations, limitations, and verification reference.
              </div>
            </div>
            <div class="shareMini">
              <div class="shareMiniTop">Not included</div>
              <div class="shareMiniBody">
                Legal advice, certification, ongoing monitoring, or compliance guarantees.
              </div>
            </div>
          </div>

          <div class="issueNotes">
            <p>
              This report reflects what was publicly detectable at scan-time. It is a factual snapshot of observable signals.
            </p>
            <p>
              If the report is modified, verification will fail. For integrity checks, use the verification link included in the report.
            </p>
          </div>
        </div>

        <div class="helperNote" id="shareError" style="display:none;">
          Invalid or missing share link. Please request a new link from the sender.
        </div>

      </div>
    </section>
  </main>

  <script>
    const params = new URLSearchParams(window.location.search);
    const sessionId = params.get("session_id");

    const errorEl = document.getElementById("shareError");
    const downloadBtn = document.getElementById("download");

    function downloadReport() {
      if (!sessionId) return;
      window.location.href = `/download-report?session_id=${encodeURIComponent(sessionId)}`;
    }

    if (!sessionId) {
      downloadBtn.disabled = true;
      downloadBtn.style.opacity = "0.7";
      downloadBtn.style.cursor = "not-allowed";
      errorEl.style.display = "block";
    } else {
      downloadBtn.addEventListener("click", downloadReport);
    }
  </script>
</body>
</html>
